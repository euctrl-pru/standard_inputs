<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>A Standard Inputs Prototype Walk-through</title>
    <meta charset="utf-8" />
    <meta name="author" content="Enrico Spinielli" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/middlebury-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="walkthrough-01.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# A Standard Inputs Prototype Walk-through
### Enrico Spinielli
### EUROCONTROL <img src='../images/eurocontrol-logo-noname.png' height='28px'>, Aviation Intelligence Unit
### 2020-09-07 (updated: 2020-09-07)

---


layout: true
background-image: url(../images/eurocontrol-logo-wide.svg)
background-position: 2% 99%
background-size: 18%




---


# Outline


* List the requirements (no debate üòâ)
* Walk through, i.e. the practical steps to
  - understand the organization of the project
  - define/update/view the *doc*
  - publishing (‚òÅÔ∏è)


.bottom[

&lt;small&gt;
**Note**: unless you are really Really REALLY eager I would leave the `git`/`GitHub` nitty-gritty
details for another time.
*They are important* but they are sort of _technically shocking_ if you never went through
this kind of stuff...
&lt;/small&gt;

]


---
# (Preliminary) Requirements - WebEx

My understanding from WebEx w/ D√©sir√©e and Kirsteen

1.	Possibility to publish the doc on the web publicly
1.	Possibility to generate web and PDF version from (mainly) the same source
1.	Possibility to publish on the web intermediate updates compared to the (bi-yearly?)
    PDF/paper version
1.	Traceability of changes in the various main/minor versions

---

# (Preliminary) Requirements - email feedback

* Interactive graphs
  - dashboard-like
  - tooltip-ish, ...
* Need for more of a Portal than a *bookdown*
* Sharing underlying data: how (Excel, ...)?
* site analytics
* visual identity

---

# Walk-through

This walk-through will show 

1. structure of the project
1. typical "editing" session
1. how the *cloud* helps out

---
background-image: none;


.right-column[
# Project organization
]

.left-column[

```text
+-- _bookdown.yml
+-- _output.yml
+-- _build.sh
+-- _common.R
+-- cover.pdf
+-- cover.png
+-- preamble.tex
+-- prebody.tex
+-- style.css
+-- index.Rmd
+-- ...
+-- &lt;a bunch of .Rmd's&gt;
+-- data
|   +-- ...
|   \-- inflation.csv
+-- figures
|   +-- ...
|   \-- airline_cost_structure.png
+-- images
|   +-- ...
|   \-- euctrl-logo.png
+-- _book
+-- DESCRIPTION         
+-- LICENSE.md          
+-- README.md           
+-- standard_inputs.Rproj
+-- R
    +-- ...
    \-- export_inflation.R
```
]

---
background-image: none;


.right-column[
# Project organization

* project files
]

.left-column[

```text
+-- _bookdown.yml
+-- _output.yml
+-- _build.sh
+-- _common.R
+-- cover.pdf
+-- cover.png
+-- preamble.tex
+-- prebody.tex
+-- style.css
+-- index.Rmd
+-- ...
+-- &lt;a bunch of .Rmd's&gt;
+-- data
|   +-- ...
|   \-- inflation.csv
+-- figures
|   +-- ...
|   \-- airline_cost_structure.png
+-- images
|   +-- ...
|   \-- euctrl-logo.png
+-- _book                  
*+-- DESCRIPTION
*+-- LICENSE.md
*+-- README.md
*+-- standard_inputs.Rproj
+-- R
    +-- ...
    \-- export_inflation.R
```

]


---

# Walk-through: project files

--
* `.Rproj` are for RStudio IDE projects

--

* `DESCRIPTION` with `bookdown` is
  [used when you publish via TravisCI](https://bookdown.org/yihui/bookdown/github.html).
  `LICENSE.md` is about &lt;svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  &lt;path d="M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 448c-110.532 0-200-89.451-200-200 0-110.531 89.451-200 200-200 110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200zm107.351-101.064c-9.614 9.712-45.53 41.396-104.065 41.396-82.43 0-140.484-61.425-140.484-141.567 0-79.152 60.275-139.401 139.762-139.401 55.531 0 88.738 26.62 97.593 34.779a11.965 11.965 0 0 1 1.936 15.322l-18.155 28.113c-3.841 5.95-11.966 7.282-17.499 2.921-8.595-6.776-31.814-22.538-61.708-22.538-48.303 0-77.916 35.33-77.916 80.082 0 41.589 26.888 83.692 78.277 83.692 32.657 0 56.843-19.039 65.726-27.225 5.27-4.857 13.596-4.039 17.82 1.738l19.865 27.17a11.947 11.947 0 0 1-1.152 15.518z"&gt;&lt;/path&gt;&lt;/svg&gt;

--

* `README.md` is for the GitHub repo
  &lt;img src="readme-example.png" width="1229" /&gt;


---
.right-column[
# Project organization

* project files
* YAML files and main Rmd
]

.left-column[

```text
*+-- _bookdown.yml
*+-- _output.yml
*+-- _build.sh
*+-- _common.R
+-- cover.pdf
+-- cover.png
+-- preamble.tex
+-- prebody.tex
+-- style.css
*+-- index.Rmd
+-- ...
+-- &lt;a bunch of .Rmd's&gt;
+-- data
|   +-- ...
|   \-- inflation.csv
+-- figures
|   +-- ...
|   \-- airline_cost_structure.png
+-- images
|   +-- ...
|   \-- euctrl-logo.png
*+-- _book
+-- DESCRIPTION         
+-- LICENSE.md          
+-- README.md           
+-- standard_inputs.Rproj
+-- R
    +-- ...
    \-- export_inflation.R
```
]

---
# YAML files and main Rmd
## `_output.yml`

```yml
bookdown::gitbook:
  css: style.css
  config:
    toc:
      before: |
        &lt;li&gt;
          &lt;a href="./"&gt;Standard Inputs for EUROCONTROL Cost-Benefit Analyses&lt;/a&gt;
        &lt;/li&gt;
    download: ["pdf"]

bookdown::pdf_book:
  includes:
    in_header: preamble.tex
    before_body: prebody.tex
  latex_engine: xelatex
  citation_package: natbib
  keep_tex: yes

```

---

# YAML files and main Rmd
## `_output.yml`

```yml
*bookdown::gitbook:
* css: style.css
* config:
*   toc:
*     before: |
*       &lt;li&gt;
*         &lt;a href="./"&gt;Standard Inputs for EUROCONTROL Cost-Benefit Analyses&lt;/a&gt;
*       &lt;/li&gt;
*   download: ["pdf"]

bookdown::pdf_book:
  includes:
    in_header: preamble.tex
    before_body: prebody.tex
  latex_engine: xelatex
  citation_package: natbib
  keep_tex: yes

```

&lt;img src="main-link.png" alt="main link" style="position: absolute;left: 15%;top: 58%;"&gt;

---

# YAML files and main Rmd
## `_output.yml`

```yml
bookdown::gitbook:
  css: style.css
  config:
    toc:
      before: |
        &lt;li&gt;
          &lt;a href="./"&gt;Standard Inputs for EUROCONTROL Cost-Benefit Analyses&lt;/a&gt;
        &lt;/li&gt;
    download: ["pdf"]

*bookdown::pdf_book:
* includes:
*   in_header: preamble.tex
*   before_body: prebody.tex
* latex_engine: xelatex
* citation_package: natbib
* keep_tex: yes
```

&lt;img src="page-layout.png" alt="page layout" style="height: 80%;position: absolute;left: 54%;top: 15%;"&gt;

---

# YAML files and main Rmd
## `_bookdown.yml`

```yml
# K-M (kint &amp; merge) approach, see https://bookdown.org/yihui/bookdown/new-session.html
new_session: yes

book_filename: "standard_inputs"
delete_merged_file: true
output_dir: "_book"

# language:
#   ui:
#     chapter_name: "Chapter "

before_chapter_script: "_common.R"

rmd_files: [
  "index.Rmd",
  "introduction.Rmd",
  "conversions.Rmd",
  "geographical_areas.Rmd",
  #  Part: Operational Values
  "aircraft_operating_costs.Rmd",
  "passengers_per_movement.Rmd",
  "cancellation_cost.Rmd",
  "operational_cancellation_rate.Rmd",
  "cost_of_delay.Rmd",
  "cost_of_diversion.Rmd",
  "en_route_ans_costs.Rmd",
  #  Part: Safety Related Values
  "accident_incident_statistics.Rmd",
  # Part: Economic Values
  "ansps_employment_costs.Rmd",
  # Part: Environmental Values
  "amount_of_emissions.Rmd",
  # Part: Traffic and Capacity Related Values
  "aircraft_operating_costs.Rmd",
  "references.Rmd",
  "annexes.Rmd",
  "data.Rmd"
]```

&lt;img src="book-toc.png" alt="book ToC" style="height: 80%;position: absolute;left: 54%;top: 15%;"&gt;


---

.right-column[
# Project organization

* project files
* YAML files and main Rmd
* style  &amp; Co.
  - [LaTeX](https://www.overleaf.com/learn/)
  - [CSS](https://www.w3schools.com/css/default.asp)
  - [Biblio style (LaTeX)](https://www.zotero.org/styles)
]

.left-column[
```

```text
+-- _bookdown.yml 
+-- _output.yml   
+-- _build.sh
+-- _common.R     
+-- cover.pdf    
+-- cover.png    
*+-- preamble.tex
*+-- prebody.tex
*+-- style.css
+-- index.Rmd    
+-- ...
+-- &lt;a bunch of .Rmd's&gt;
+-- data
|   +-- ...
|   \-- inflation.csv
+-- figures
|   +-- ...
|   \-- airline_cost_structure.png
*+-- images
*|   +-- ...
*|   \-- euctrl-logo.png
+-- _book
+-- DESCRIPTION         
+-- LICENSE.md          
+-- README.md           
+-- standard_inputs.Rproj
+-- R
    +-- ...
    \-- export_inflation.R
```
]

---

.right-column[
# Project organization

* project files
* YAML files and main Rmd
* style  &amp; Co.
  - [LaTeX](https://www.overleaf.com/learn/)
  - [CSS](https://www.w3schools.com/css/default.asp)
  - [Biblio style (LaTeX)](https://www.zotero.org/styles)
* content: the *real thing*
]

.left-column[

```text
+-- _bookdown.yml 
+-- _output.yml   
+-- _build.sh
+-- _common.R     
+-- cover.pdf    
+-- cover.png    
+-- preamble.tex
+-- prebody.tex 
+-- style.css   
*+-- index.Rmd
*+-- ...
*+-- &lt;a bunch of .Rmd's&gt;
*+-- data
*|   +-- ...
*|   \-- inflation.csv
*+-- figures
*|   +-- ...
*|   \-- airline_cost_structure.png
+-- images                
|   +-- ...               
|   \-- euctrl-logo.png   
+-- _book
+-- DESCRIPTION         
+-- LICENSE.md          
+-- README.md           
+-- standard_inputs.Rproj
*+-- R
*   +-- ...
*   \-- export_inflation.R
```
]


---

# Editing session

![](compose-compile-publish.png)

&lt;span style="font-size:10pt"&gt;Image from &lt;a href="https://ontheline.trincoll.edu/bookdown.html"&gt;https://ontheline.trincoll.edu/bookdown.html&lt;/a&gt;&lt;/span&gt;
---
# RMarkdown &lt;svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  &lt;path d="M593.8 59.1H46.2C20.7 59.1 0 79.8 0 105.2v301.5c0 25.5 20.7 46.2 46.2 46.2h547.7c25.5 0 46.2-20.7 46.1-46.1V105.2c0-25.4-20.7-46.1-46.2-46.1zM338.5 360.6H277v-120l-61.5 76.9-61.5-76.9v120H92.3V151.4h61.5l61.5 76.9 61.5-76.9h61.5v209.2zm135.3 3.1L381.5 256H443V151.4h61.5V256H566z"&gt;&lt;/path&gt;&lt;/svg&gt; 1

&lt;img src="quicktourexample.png" width="75%" /&gt;


&lt;span style="font-size:10pt"&gt;Image from &lt;a href="https://rmarkdown.rstudio.com/authoring_quick_tour.html"&gt;https://rmarkdown.rstudio.com/authoring_quick_tour.html&lt;/a&gt;&lt;/span&gt;

---
# RMarkdown &lt;svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  &lt;path d="M593.8 59.1H46.2C20.7 59.1 0 79.8 0 105.2v301.5c0 25.5 20.7 46.2 46.2 46.2h547.7c25.5 0 46.2-20.7 46.1-46.1V105.2c0-25.4-20.7-46.1-46.2-46.1zM338.5 360.6H277v-120l-61.5 76.9-61.5-76.9v120H92.3V151.4h61.5l61.5 76.9 61.5-76.9h61.5v209.2zm135.3 3.1L381.5 256H443V151.4h61.5V256H566z"&gt;&lt;/path&gt;&lt;/svg&gt; 2

&lt;img src="markdownchunk.png" width="60%" /&gt;

&lt;span style="font-size:10pt"&gt;Image from &lt;a href="https://rmarkdown.rstudio.com/authoring_quick_tour.html"&gt;https://rmarkdown.rstudio.com/authoring_quick_tour.html&lt;/a&gt;&lt;/span&gt;


---
# RMarkdown &lt;svg viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;"&gt;  &lt;path d="M593.8 59.1H46.2C20.7 59.1 0 79.8 0 105.2v301.5c0 25.5 20.7 46.2 46.2 46.2h547.7c25.5 0 46.2-20.7 46.1-46.1V105.2c0-25.4-20.7-46.1-46.2-46.1zM338.5 360.6H277v-120l-61.5 76.9-61.5-76.9v120H92.3V151.4h61.5l61.5 76.9 61.5-76.9h61.5v209.2zm135.3 3.1L381.5 256H443V151.4h61.5V256H566z"&gt;&lt;/path&gt;&lt;/svg&gt; 3

![](quicktourinline.png)

&lt;span style="font-size:10pt"&gt;Image from &lt;a href="https://rmarkdown.rstudio.com/authoring_quick_tour.html"&gt;https://rmarkdown.rstudio.com/authoring_quick_tour.html&lt;/a&gt;&lt;/span&gt;


---

# Automated (preview /) publishing 

&lt;img src="ci.png" width="1171" /&gt;

---

# Release management

&lt;img src="workflows.png" width="80%" /&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
